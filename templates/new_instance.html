{{define "content"}}
<div class="header-row">
    <h1>Create New Instance</h1>
    <a href="/" class="btn btn-secondary">Back</a>
</div>

<form hx-post="/instances" hx-swap="none" hx-disabled-elt="find button[type='submit']" class="form card" style="margin:0 auto">
    <div class="form-section">
        <h2>Basic Info</h2>
        <div class="form-group">
            <label for="name">Instance Name</label>
            <input type="text" id="name" name="name" required
                   placeholder="e.g. my-project" pattern="[a-zA-Z0-9_-]+"
                   title="Only letters, numbers, hyphens, and underscores">
        </div>
        <p class="hint">API keys, GitHub tokens, and other config are injected from <a href="/settings">Global Settings</a> â€” no per-instance setup needed.</p>
    </div>
    <div class="form-section">
        <h2>Resource Limits</h2>
        <div class="form-row">
            <div class="form-group">
                <label for="memory_mb">Memory</label>
                <select id="memory_mb" name="memory_mb">
                    <option value="0">Unlimited</option>
                    <option value="1024">1 GB</option>
                    <option value="2048" selected>2 GB</option>
                    <option value="4096">4 GB</option>
                    <option value="8192">8 GB</option>
                    <option value="16384">16 GB</option>
                </select>
            </div>
            <div class="form-group">
                <label for="cpu_cores">CPU</label>
                <select id="cpu_cores" name="cpu_cores">
                    <option value="0">Unlimited</option>
                    <option value="1">1 Core</option>
                    <option value="2" selected>2 Cores</option>
                    <option value="4">4 Cores</option>
                    <option value="8">8 Cores</option>
                </select>
            </div>
        </div>
        <p class="hint">Set to "Unlimited" to remove resource constraints.</p>
    </div>

    <div class="form-actions">
        <button type="submit" class="btn btn-primary"><span class="spinner"></span>Create & Start Instance</button>
        <a href="/" class="btn btn-secondary">Cancel</a>
    </div>
</form>
{{end}}
