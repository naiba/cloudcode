{{define "content"}}
<div class="header-row">
    <h1>Create New Instance</h1>
    <a href="/" class="btn btn-secondary">Back</a>
</div>

<form hx-post="/instances" hx-swap="none" hx-disabled-elt="find button[type='submit']" class="form card" style="margin:0 auto">
    <div class="form-section">
        <h2>Basic Info</h2>
        <div class="form-group">
            <label for="name">Instance Name</label>
            <input type="text" id="name" name="name" required
                   placeholder="e.g. my-project" pattern="[a-zA-Z0-9_-]+"
                   title="Only letters, numbers, hyphens, and underscores">
        </div>
        <p class="hint">API keys, GitHub tokens, and other config are injected from <a href="/settings">Global Settings</a> â€” no per-instance setup needed.</p>
    </div>
    <div class="form-section">
        <h2>Resource Limits</h2>
        <div class="form-row">
            <div class="form-group">
                <label for="memory_mb">Memory</label>
                <input type="number" id="memory_mb" name="memory_mb" min="0" step="256" value="2048"
                       placeholder="0 = Unlimited" class="input-sm">
                <p class="hint">MB, 0 = Unlimited (Host: {{.TotalMemoryMB}} MB)</p>
            </div>
            <div class="form-group">
                <label for="cpu_cores">CPU</label>
                <input type="number" id="cpu_cores" name="cpu_cores" min="0" step="1" value="2"
                       placeholder="0 = Unlimited" class="input-sm">
                <p class="hint">Cores, 0 = Unlimited (Host: {{.TotalCPUCores}} Cores)</p>
            </div>
        </div>
    </div>

    <div class="form-actions">
        <button type="submit" class="btn btn-primary"><span class="spinner"></span>Create & Start Instance</button>
        <a href="/" class="btn btn-secondary">Cancel</a>
    </div>
</form>
{{end}}
