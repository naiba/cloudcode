{{define "instance_row"}}
<tr id="instance-{{.ID}}" hx-get="/instances/{{.ID}}/status" hx-trigger="every 10s" hx-swap="outerHTML" hx-indicator="find .status-indicator">
    <td>
        <a href="/instances/{{.ID}}" class="instance-name">{{.Name}}</a>
    </td>
    <td>
        <span class="badge {{statusBadge .Status}}">{{.Status}}</span>
    </td>
    <td>{{.Port}}</td>
    <td>{{.CreatedAt.Format "2006-01-02 15:04"}}</td>
    <td class="actions">
        {{if eq .Status "running"}}
        <a href="javascript:void(0)" onclick="switchInstance('{{.ID}}')" class="btn btn-sm btn-success">Open</a>
        <a href="/instances/{{.ID}}/terminal" target="_blank" class="btn btn-sm btn-secondary" title="Terminal">Terminal</a>
        <button hx-post="/instances/{{.ID}}/stop"
                hx-target="#instance-{{.ID}}"
                hx-swap="outerHTML"
                hx-disabled-elt="this"
                class="btn btn-sm btn-warning"><span class="spinner"></span>Stop</button>
        <button hx-post="/instances/{{.ID}}/restart"
                hx-target="#instance-{{.ID}}"
                hx-swap="outerHTML"
                hx-disabled-elt="this"
                class="btn btn-sm btn-secondary"><span class="spinner"></span>Restart</button>
        {{else if or (eq .Status "stopped") (eq .Status "exited") (eq .Status "created") (eq .Status "error")}}
        <button hx-post="/instances/{{.ID}}/start"
                hx-target="#instance-{{.ID}}"
                hx-swap="outerHTML"
                hx-disabled-elt="this"
                class="btn btn-sm btn-primary"><span class="spinner"></span>Start</button>
        {{end}}
        <button onclick="openLogs('{{.ID}}')"
                class="btn btn-sm btn-secondary">Logs</button>
        <button hx-delete="/instances/{{.ID}}"
                hx-target="#instance-{{.ID}}"
                hx-swap="outerHTML"
                hx-disabled-elt="this"
                hx-confirm="Are you sure you want to delete instance '{{.Name}}'? This will destroy the container."
                class="btn btn-sm btn-danger"><span class="spinner"></span>Delete</button>
    </td>
</tr>
{{end}}
